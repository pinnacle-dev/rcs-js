// This file was auto-generated by Fern from our API Definition.

import * as Pinnacle from "../../src/api/index";
import { PinnacleClient } from "../../src/Client";
import { mockServerPool } from "../mock-server/MockServerPool";

describe("Rcs", () => {
    test("getCapabilities (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { phoneNumbers: ["+12345678901", "+19876543210"] };
        const rawResponseBody = {
            "+12345678901": {
                cards: { standalone: true, carousel: true },
                actions: {
                    openUrl: true,
                    call: true,
                    trigger: true,
                    requestUserLocation: true,
                    scheduleEvent: false,
                    sendLocation: false,
                },
            },
            "+19876543210": {
                cards: { standalone: true, carousel: true },
                actions: {
                    openUrl: true,
                    call: true,
                    trigger: true,
                    requestUserLocation: true,
                    scheduleEvent: true,
                    sendLocation: true,
                },
            },
        };
        server
            .mockEndpoint()
            .post("/rcs/capabilities")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.rcs.getCapabilities({
            phoneNumbers: ["+12345678901", "+19876543210"],
        });
        expect(response).toEqual({
            "+12345678901": {
                cards: {
                    standalone: true,
                    carousel: true,
                },
                actions: {
                    openUrl: true,
                    call: true,
                    trigger: true,
                    requestUserLocation: true,
                    scheduleEvent: false,
                    sendLocation: false,
                },
            },
            "+19876543210": {
                cards: {
                    standalone: true,
                    carousel: true,
                },
                actions: {
                    openUrl: true,
                    call: true,
                    trigger: true,
                    requestUserLocation: true,
                    scheduleEvent: true,
                    sendLocation: true,
                },
            },
        });
    });

    test("getCapabilities (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { phoneNumbers: ["phoneNumbers", "phoneNumbers"] };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/rcs/capabilities")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getCapabilities({
                phoneNumbers: ["phoneNumbers", "phoneNumbers"],
            });
        }).rejects.toThrow(Pinnacle.BadRequestError);
    });

    test("getCapabilities (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { phoneNumbers: ["phoneNumbers", "phoneNumbers"] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/capabilities")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getCapabilities({
                phoneNumbers: ["phoneNumbers", "phoneNumbers"],
            });
        }).rejects.toThrow(Pinnacle.UnauthorizedError);
    });

    test("getCapabilities (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { phoneNumbers: ["phoneNumbers", "phoneNumbers"] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/capabilities")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getCapabilities({
                phoneNumbers: ["phoneNumbers", "phoneNumbers"],
            });
        }).rejects.toThrow(Pinnacle.InternalServerError);
    });

    test("getCapabilities (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { phoneNumbers: ["phoneNumbers", "phoneNumbers"] };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/capabilities")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(501)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getCapabilities({
                phoneNumbers: ["phoneNumbers", "phoneNumbers"],
            });
        }).rejects.toThrow(Pinnacle.NotImplementedError);
    });

    test("whitelist (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agent_XXXXXXXXXXXX", phoneNumber: "+12345678901" };
        const rawResponseBody = { success: true };
        server
            .mockEndpoint()
            .post("/rcs/whitelist")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.rcs.whitelist({
            agentId: "agent_XXXXXXXXXXXX",
            phoneNumber: "+12345678901",
        });
        expect(response).toEqual({
            success: true,
        });
    });

    test("whitelist (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId", phoneNumber: "phoneNumber" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/rcs/whitelist")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.whitelist({
                agentId: "agentId",
                phoneNumber: "phoneNumber",
            });
        }).rejects.toThrow(Pinnacle.BadRequestError);
    });

    test("whitelist (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId", phoneNumber: "phoneNumber" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/whitelist")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.whitelist({
                agentId: "agentId",
                phoneNumber: "phoneNumber",
            });
        }).rejects.toThrow(Pinnacle.UnauthorizedError);
    });

    test("whitelist (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId", phoneNumber: "phoneNumber" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/rcs/whitelist")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.whitelist({
                agentId: "agentId",
                phoneNumber: "phoneNumber",
            });
        }).rejects.toThrow(Pinnacle.NotFoundError);
    });

    test("whitelist (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId", phoneNumber: "phoneNumber" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/whitelist")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.whitelist({
                agentId: "agentId",
                phoneNumber: "phoneNumber",
            });
        }).rejects.toThrow(Pinnacle.InternalServerError);
    });

    test("whitelist (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId", phoneNumber: "phoneNumber" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/whitelist")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(501)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.whitelist({
                agentId: "agentId",
                phoneNumber: "phoneNumber",
            });
        }).rejects.toThrow(Pinnacle.NotImplementedError);
    });

    test("getLink (1)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = {
            agentId: "agent_XXXXXXXXXXXX",
            testMode: false,
            phoneNumber: "+12345678901",
            body: "Hello, I need help with my order",
        };
        const rawResponseBody = {
            url: "sms://+12345678901?service_id=pinnacletest_agent&body=Hello%20from%20RCS!",
            serviceId: "pinnacletest_agent",
        };
        server
            .mockEndpoint()
            .post("/rcs/link")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.rcs.getLink({
            agentId: "agent_XXXXXXXXXXXX",
            testMode: false,
            phoneNumber: "+12345678901",
            body: "Hello, I need help with my order",
        });
        expect(response).toEqual({
            url: "sms://+12345678901?service_id=pinnacletest_agent&body=Hello%20from%20RCS!",
            serviceId: "pinnacletest_agent",
        });
    });

    test("getLink (2)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/rcs/link")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(400)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getLink({
                agentId: "agentId",
            });
        }).rejects.toThrow(Pinnacle.BadRequestError);
    });

    test("getLink (3)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/link")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(401)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getLink({
                agentId: "agentId",
            });
        }).rejects.toThrow(Pinnacle.UnauthorizedError);
    });

    test("getLink (4)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId" };
        const rawResponseBody = { key: "value" };
        server
            .mockEndpoint()
            .post("/rcs/link")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(404)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getLink({
                agentId: "agentId",
            });
        }).rejects.toThrow(Pinnacle.NotFoundError);
    });

    test("getLink (5)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/link")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(500)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getLink({
                agentId: "agentId",
            });
        }).rejects.toThrow(Pinnacle.InternalServerError);
    });

    test("getLink (6)", async () => {
        const server = mockServerPool.createServer();
        const client = new PinnacleClient({ apiKey: "test", environment: server.baseUrl });
        const rawRequestBody = { agentId: "agentId" };
        const rawResponseBody = { error: "error" };
        server
            .mockEndpoint()
            .post("/rcs/link")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(501)
            .jsonBody(rawResponseBody)
            .build();

        await expect(async () => {
            return await client.rcs.getLink({
                agentId: "agentId",
            });
        }).rejects.toThrow(Pinnacle.NotImplementedError);
    });
});
